"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[667],{1667:(P,m,n)=>{n.r(m),n.d(m,{BusModule:()=>w});var p=n(6895),r=n(4006),h=n(5593),g=n(1740),v=n(819),b=n(5479);class C{constructor(i,t,o,l,a,d,c,F,Y,z,O){this.BusId=i,this.name=t,this.surname=o,this.email=l,this.birthDate=a,this.phoneNumber=d,this.gender=c,this.pesel=F,this.addressId=Y,this.targetObjectId=z,this.roleId=O}}class y{constructor(i,t){this.oldPassword=i,this.password=t}}var e=n(8274),D=n(7468),A=n(529);let f=(()=>{class s{constructor(t){this.http=t,this.url=D.T+"buss"}getAll(){return this.http.get(this.url+"/getAllBuss",{observe:"response"})}getAllNotDeleted(){return this.http.get(this.url+"/getAllNotDeletedBuss",{observe:"response"})}create(t){return this.http.post(this.url+"/createBus",t,{observe:"response"})}changePassword(t){return this.http.put(this.url+"/changePassword",t,{observe:"response"})}edit(t){return this.http.put(this.url+"/editBus",t,{observe:"response"})}delete(t){return this.http.delete(`${this.url}/deleteBus/${t}`,{observe:"response"})}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(A.eN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var u=n(4325),S=n(1998),B=n(805);let T=(()=>{class s{constructor(t,o,l,a,d,c){this.fb=t,this.busService=o,this.ref=l,this.config=a,this.changeDateService=d,this.messageService=c,this.busForm=this.fb.group({name:["",r.kI.required],registrationNumber:["",r.kI.required],places:["",r.kI.required]}),this.bus=new C,this.password=new y,this.edit=!1}ngOnInit(){this.edit=this.config.data.edit,this.edit&&(this.bus=this.config.data.bus)}onCreateBus(){this.busService.create(this.bus).subscribe(t=>{this.password=t.body,this.messageService.add({key:"mainToast",severity:"success",summary:"Success",detail:"utworzono!"})})}onEditBus(){this.busService.edit(this.bus).subscribe({next:()=>{console.log("edytowano")},error:t=>{console.log(t)}}),this.ref.close()}onCloseDialog(){this.ref.close()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(r.QS),e.Y36(f),e.Y36(u.E7),e.Y36(u.S),e.Y36(S.H),e.Y36(B.ez))},s.\u0275cmp=e.Xpm({type:s,selectors:[["fixtab-buss-dialog"]],decls:14,vars:3,consts:[[1,"dialog-content"],[1,"dialog-body"],[1,"dialog-form",3,"formGroup"],["form","ngForm"],[1,"p-float-label"],["pInputText","","id","name","formControlName","name","placeholder","Nazwa"],["pInputText","","id","registrationNumber","formControlName","registrationNumber","placeholder","Numer rejestracyjny"],["pInputText","","id","places","formControlName","places","placeholder","Miejsca"],[1,"dialog-footer"],["styleClass","button-width dialog-button-margin",3,"label","disabled","onClick"],["styleClass","button-width dialog-button-margin",3,"onClick"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2,3)(4,"span",4),e._UZ(5,"input",5),e.qZA(),e.TgZ(6,"span",4),e._UZ(7,"input",6),e.qZA(),e.TgZ(8,"span",4),e._UZ(9,"input",7),e.qZA()()(),e.TgZ(10,"div",8)(11,"p-button",9),e.NdJ("onClick",function(){return o.edit?o.onEditBus():o.onCreateBus()}),e.qZA(),e.TgZ(12,"p-button",10),e.NdJ("onClick",function(){return o.onCloseDialog()}),e._uU(13,"Anuluj"),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("formGroup",o.busForm),e.xp6(9),e.Q6J("label",o.edit?"Edytuj":"Dodaj")("disabled",o.busForm.invalid))},dependencies:[h.zx,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,g.o],styles:["[_nghost-%COMP%]     .p-dropdown{width:230px;height:40px;text-align:left}[_nghost-%COMP%]     .p-dropdown input{display:none}.dialog-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:30px;font-weight:700}.dialog-body[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:10px}"]}),s})();var N=n(9767),E=n(5378),x=n(434);function Z(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"fixtab-delete-dialog",4),e.NdJ("deleteConfirmationEmit",function(l){e.CHM(t);const a=e.oxw();return e.KtG(a.handleBussDeleteDialog(l))}),e.qZA()}}const I=[{path:"bus",component:(()=>{class s{constructor(t,o,l){this.dialogService=t,this.busService=o,this.messageService=l,this.columns=[],this.buses=[],this.selectedBus=null,this.openDeleteDialog=!1}ngOnInit(){this.loadColums(),this.loadBuss()}loadColums(){this.columns=[{header:"Nazwa",field:"name"},{header:"Numer rejestracyjny",field:"registrationNumber"},{header:"Miejsca",field:"places"}]}loadBuss(){this.busService.getAllNotDeleted().subscribe(t=>{this.buses=t.body??[]})}onBusSelected(t){this.selectedBus=t,console.log(this.selectedBus)}openBussDialog(t){this.dialogService.open(T,{header:t?"Edytuj autobus":"Dodaj autobus",width:"60%",height:"60%",data:{edit:t,bus:this.selectedBus}}).onClose.subscribe(l=>this.handleBussDialog(l))}openBussDeleteDialog(t){this.openDeleteDialog=t}handleBussDialog(t){console.log(t)}handleBussDeleteDialog(t){t&&this.busService.delete(this.selectedBus?.BusId).subscribe({next:()=>{this.messageService.add({key:"mainToast",severity:"success",summary:"Success",detail:"usuni\u0119to!"}),this.loadBuss()},error:()=>{this.messageService.add({key:"mainToast",severity:"error",summary:"Error",detail:"nie usuni\u0119to!"})}}),this.openDeleteDialog=!1}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(u.xA),e.Y36(f),e.Y36(B.ez))},s.\u0275cmp=e.Xpm({type:s,selectors:[["fixtab-buses"]],decls:4,vars:5,consts:[[1,"table-with-buttons"],["tableName","Autobusy",3,"columns","values","showTableName","selected"],[3,"isSelectedItem","addActionEmit","editActionEmit","deleteActionEmit"],[3,"deleteConfirmationEmit",4,"ngIf"],[3,"deleteConfirmationEmit"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"fixtab-table",1),e.NdJ("selected",function(a){return o.onBusSelected(a)}),e.qZA(),e.TgZ(2,"fixtab-table-buttons",2),e.NdJ("addActionEmit",function(a){return o.openBussDialog(a)})("editActionEmit",function(a){return o.openBussDialog(a)})("deleteActionEmit",function(a){return o.openBussDeleteDialog(a)}),e.qZA()(),e.YNc(3,Z,1,0,"fixtab-delete-dialog",3)),2&t&&(e.xp6(1),e.Q6J("columns",o.columns)("values",o.buses)("showTableName",!0),e.xp6(1),e.Q6J("isSelectedItem",null!==o.selectedBus),e.xp6(1),e.Q6J("ngIf",o.openDeleteDialog))},dependencies:[N.a,E.Y,x.F,p.O5],encapsulation:2}),s})()}];let j=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[b.Bz.forChild(I),b.Bz]}),s})();var J=n(585),M=n(2210);let w=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[j,v.K,h.hJ,p.ez,r.u5,r.UX,g.j,J._8,M.kW]}),s})()}}]);