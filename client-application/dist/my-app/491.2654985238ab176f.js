"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[491],{9491:(z,c,a)=>{a.r(c),a.d(c,{ClientsModule:()=>Q});var h=a(5479),s=a(4006);class v{constructor(r,t,n,o,l,d,m){this.addressId=r,this.city=t,this.country=n,this.flatNumber=o,this.postCode=l,this.street=d,this.streetNumber=m}}class M{constructor(r,t,n,o,l,d,m,F,x){this.clientId=r,this.email=t,this.name=n,this.surname=o,this.address=l,this.birthDate=d,this.pesel=m,this.phoneNumber=F,this.gender=x}}var e=a(8274),u=a(4325),T=a(7468),y=a(529);let p=(()=>{class i{constructor(t){this.http=t,this.url=T.T+"client"}getAll(){return this.http.get(this.url+"/getAllClients",{observe:"response"})}getAllNotDeleted(){return this.http.get(this.url+"/getAllNotDeletedClients",{observe:"response"})}create(t){return this.http.post(this.url+"/createClient",t)}update(t){return this.http.put(this.url+"/editClient",t)}delete(t){return this.http.delete(`${this.url}/deleteClient/${t}`)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(y.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var g=a(805),N=a(1998),C=a(5593),f=a(1740),b=a(585);let _=(()=>{class i{constructor(t,n,o,l,d,m){this.fb=t,this.ref=n,this.config=o,this.clientService=l,this.messageService=d,this.changeDateService=m,this.clientForm=this.fb.group({name:["",s.kI.required],surname:["",s.kI.required],email:["",[s.kI.required,s.kI.email]],birthDay:["",[s.kI.required]],phoneNumber:["",[s.kI.required,s.kI.pattern("[0-9]{11}")]],city:["",s.kI.required],postalCode:["",s.kI.required],street:["",s.kI.required],streetNumber:["",s.kI.required]}),this.client=new M,this.address=new v,this.clientBirthDate=new Date,this.edit=!1}ngOnInit(){this.edit=this.config.data.edit,this.edit&&(this.client=this.config.data.client,this.address=this.client.address,this.clientBirthDate=new Date(this.client.birthDate))}onEditClient(){this.client.address=this.address,this.client.birthDate=this.changeDateService.changeDateToString(this.clientBirthDate),this.clientService.update(this.client).subscribe({next:t=>{this.messageService.add({key:"mainToast",severity:"success",summary:"Success",detail:"edytowano!"}),this.ref.close(t)},error:t=>{this.messageService.add({key:"mainToast",severity:"error",summary:"Error",detail:"nie edytowano!"})}})}onCreateClient(){this.client.address=this.address,this.client.birthDate=this.changeDateService.changeDateToString(this.clientBirthDate),this.clientService.create(this.client).subscribe({next:t=>{this.messageService.add({key:"mainToast",severity:"success",summary:"Success",detail:"utworzono!"}),this.ref.close(t)},error:t=>{this.messageService.add({key:"mainToast",severity:"success",summary:"Success",detail:"utworzono!"})}})}onCloseDialog(){this.ref.close()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.QS),e.Y36(u.E7),e.Y36(u.S),e.Y36(p),e.Y36(g.ez),e.Y36(N.H))},i.\u0275cmp=e.Xpm({type:i,selectors:[["fixtab-clients-dialog"]],decls:26,vars:12,consts:[[1,"dialog-content"],[1,"dialog-body"],[1,"dialog-form",3,"formGroup"],["form","ngForm"],[1,"p-float-label"],["pInputText","","id","name","formControlName","name","placeholder","Imie",3,"ngModel","ngModelChange"],["pInputText","","id","surname","formControlName","surname","placeholder","Nazwisko",3,"ngModel","ngModelChange"],["pInputText","","id","email","formControlName","email","placeholder","Email",3,"ngModel","ngModelChange"],["formControlName","birthDay","dateFormat","dd-mm-yy","appendTo","body","placeholder","Data urodzenia",3,"ngModel","ngModelChange"],["pInputText","","id","phoneNumber","formControlName","phoneNumber","placeholder","Numer telefonu","maxlength","11",3,"ngModel","ngModelChange"],["pInputText","","id","city","formControlName","city","placeholder","Miasto",3,"ngModel","ngModelChange"],["pInputText","","id","postalCode","formControlName","postalCode","placeholder","Kod pocztowy",3,"ngModel","ngModelChange"],["pInputText","","id","street","formControlName","street","placeholder","Ulica",3,"ngModel","ngModelChange"],["pInputText","","id","streetNumber","formControlName","streetNumber","placeholder","Numer domu",3,"ngModel","ngModelChange"],[1,"dialog-footer"],["styleClass","button-width dialog-button-margin",3,"label","disabled","onClick"],["styleClass","button-width dialog-button-margin",3,"onClick"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2,3)(4,"span",4)(5,"input",5),e.NdJ("ngModelChange",function(l){return n.client.name=l}),e.qZA()(),e.TgZ(6,"span",4)(7,"input",6),e.NdJ("ngModelChange",function(l){return n.client.surname=l}),e.qZA()(),e.TgZ(8,"span",4)(9,"input",7),e.NdJ("ngModelChange",function(l){return n.client.email=l}),e.qZA()(),e.TgZ(10,"span",4)(11,"p-calendar",8),e.NdJ("ngModelChange",function(l){return n.clientBirthDate=l}),e.qZA()(),e.TgZ(12,"span",4)(13,"input",9),e.NdJ("ngModelChange",function(l){return n.client.phoneNumber=l}),e.qZA()(),e.TgZ(14,"span",4)(15,"input",10),e.NdJ("ngModelChange",function(l){return n.address.city=l}),e.qZA()(),e.TgZ(16,"span",4)(17,"input",11),e.NdJ("ngModelChange",function(l){return n.address.postCode=l}),e.qZA()(),e.TgZ(18,"span",4)(19,"input",12),e.NdJ("ngModelChange",function(l){return n.address.street=l}),e.qZA()(),e.TgZ(20,"span",4)(21,"input",13),e.NdJ("ngModelChange",function(l){return n.address.streetNumber=l}),e.qZA()()()(),e.TgZ(22,"div",14)(23,"p-button",15),e.NdJ("onClick",function(){return n.edit?n.onEditClient():n.onCreateClient()}),e.qZA(),e.TgZ(24,"p-button",16),e.NdJ("onClick",function(){return n.onCloseDialog()}),e._uU(25,"Anuluj"),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("formGroup",n.clientForm),e.xp6(3),e.Q6J("ngModel",n.client.name),e.xp6(2),e.Q6J("ngModel",n.client.surname),e.xp6(2),e.Q6J("ngModel",n.client.email),e.xp6(2),e.Q6J("ngModel",n.clientBirthDate),e.xp6(2),e.Q6J("ngModel",n.client.phoneNumber),e.xp6(2),e.Q6J("ngModel",n.address.city),e.xp6(2),e.Q6J("ngModel",n.address.postCode),e.xp6(2),e.Q6J("ngModel",n.address.street),e.xp6(2),e.Q6J("ngModel",n.address.streetNumber),e.xp6(2),e.Q6J("label",n.edit?"Edytuj":"Dodaj")("disabled",n.clientForm.invalid))},dependencies:[C.zx,s._Y,s.Fj,s.JJ,s.JL,s.nD,s.sg,s.u,f.o,b.f],encapsulation:2}),i})();var S=a(9767),J=a(5378),A=a(434),D=a(6895);function I(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"fixtab-delete-dialog",4),e.NdJ("deleteConfirmationEmit",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.handleClientDeleteDialog(o))}),e.qZA()}}const Z=[{path:"clients",component:(()=>{class i{constructor(t,n,o){this.clientService=t,this.dialogService=n,this.messageService=o,this.clients=[],this.columns=[],this.selectedClient=null,this.openDeleteDialog=!1}ngOnInit(){this.loadColumn(),this.loadClients()}loadColumn(){this.columns=[{header:"Imie",field:"name"},{header:"Nazwisko",field:"surname"},{header:"Email",field:"email"},{header:"Telefon",field:"phoneNumber"}]}loadClients(){this.clientService.getAllNotDeleted().subscribe(t=>{this.clients=t.body??[]})}onClientSelected(t){this.selectedClient=t}openClientDialog(t){this.dialogService.open(_,{header:t?"Edytuj klienta":"Dodaj klienta",width:"60%",height:"60%",data:{edit:t,client:this.selectedClient}}).onClose.subscribe(o=>this.handleClientDialog(o))}openClientDeleteDialog(t){this.openDeleteDialog=t}handleClientDialog(t){t&&this.loadClients()}handleClientDeleteDialog(t){t&&this.clientService.delete(this.selectedClient?.clientId).subscribe({next:()=>{this.messageService.add({key:"mainToast",severity:"success",summary:"Success",detail:"usuni\u0119to!"}),this.loadClients()},error:()=>{this.messageService.add({key:"mainToast",severity:"error",summary:"Error",detail:"nie usuni\u0119to!"})}}),this.openDeleteDialog=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p),e.Y36(u.xA),e.Y36(g.ez))},i.\u0275cmp=e.Xpm({type:i,selectors:[["fixtab-clients"]],decls:4,vars:5,consts:[[1,"table-with-buttons"],["tableName","Klienci",3,"columns","values","showTableName","selected"],[3,"isSelectedItem","addActionEmit","editActionEmit","deleteActionEmit"],[3,"deleteConfirmationEmit",4,"ngIf"],[3,"deleteConfirmationEmit"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"fixtab-table",1),e.NdJ("selected",function(l){return n.onClientSelected(l)}),e.qZA(),e.TgZ(2,"fixtab-table-buttons",2),e.NdJ("addActionEmit",function(l){return n.openClientDialog(l)})("editActionEmit",function(l){return n.openClientDialog(l)})("deleteActionEmit",function(l){return n.openClientDeleteDialog(l)}),e.qZA()(),e.YNc(3,I,1,0,"fixtab-delete-dialog",3)),2&t&&(e.xp6(1),e.Q6J("columns",n.columns)("values",n.clients)("showTableName",!0),e.xp6(1),e.Q6J("isSelectedItem",null!==n.selectedClient),e.xp6(1),e.Q6J("ngIf",n.openDeleteDialog))},dependencies:[S.a,J.Y,A.F,D.O5],encapsulation:2}),i})()}];let E=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.Bz.forChild(Z),h.Bz]}),i})();var k=a(819);let Q=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[E,k.K,C.hJ,D.ez,s.u5,s.UX,f.j,b._8]}),i})()}}]);